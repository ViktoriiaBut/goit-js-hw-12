{"version":3,"file":"index.js","sources":["../src/main.js","../src/js/render-functions.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst apiKey = '46313967-d4d30fae59777882921d7e8bb'; // мой ключ\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchInput = document.querySelector('input[name=\"search\"]').value;\n  gallery.innerHTML = ''; // Очистка галереи перед новым поиском\n\n  axios\n    .get(\n      `https://pixabay.com/api/?key=${apiKey}&q=${searchInput}&image_type=photo&orientation=horizontal&safesearch=true&_limit=9`\n    )\n    .then(response => {\n      const hits = response.data.hits;\n      console.log(hits);\n\n      if (hits.length === 0) {\n        iziToast.show({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          color: 'red',\n          position: 'topCenter',\n        });\n      } else {\n        loader.style.display = 'block';\n        const totalImages = hits.length;\n        let loadedImages = 0; // Количество загруженных изображений\n\n        hits.forEach(hit => {\n          const galleryItem = document.createElement('li');\n          galleryItem.classList.add('gallery-item');\n          galleryItem.innerHTML = `\n            <a href=\"${hit.largeImageURL}\">\n              <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-image\">\n            </a>\n          `;\n          gallery.appendChild(galleryItem);\n\n          // Обновление прогрес0са загрузки после загрузки каждого изображения\n          const image = galleryItem.querySelector('.gallery-image');\n          image.onload = () => {\n            loadedImages++;\n            if (loadedImages === totalImages) {\n              loader.style.display = 'none'; // Прячем загрузчик посля загрузки всех изображений\n            }\n          };\n        });\n\n        lightbox.refresh(); // Обновляем SimpleLightbox\n      }\n    })\n    .catch(error => {\n      console.error(error); // Выводим ошибку в консоль на пофиксить\n      iziToast.show({\n        title: 'Error',\n        message: 'Error - while loading images. Please open new images',\n        color: 'red',\n        position: 'topCenter',\n      });\n    });\n});","let formData = {\n    email: '',\n    message: '',\n  };\n  \n  const form = document.querySelector('.feedback-form');\n  \n  // От0слеживание изменений в форме и избережении даних в локальном хранилище\n  form.addEventListener('input', event => {\n    const { name, value } = event.target;\n    formData[name] = value;\n    localStorage.setItem('feedback-form-state', JSON.stringify(formData));\n  });\n  \n  // Загрузка данних с локального хранилищаs при загрузке странички\n  const storedData = localStorage.getItem('feedback-form-state');\n  console.log(storedData);\n  \n  if (storedData) {\n    const parsedData = JSON.parse(storedData);\n    console.log(parsedData);\n    formData = parsedData;\n    form.elements.email.value = parsedData.email;\n    form.elements.message.value = parsedData.message;\n  }\n  \n  // Оброботка отправки форми\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n  \n    // Валидация данних\n    if (!formData.email || !formData.message) {\n      alert('Fill please all fields');\n      return;\n    }\n  \n    // Очи0стка данних\n    localStorage.removeItem('feedback-form-state');\n    formData.email = '';\n    formData.message = '';\n    form.reset();\n  });"],"names":["searchForm","gallery","apiKey","lightbox","SimpleLightbox","loader","event","searchInput","axios","response","hits","iziToast","totalImages","loadedImages","hit","galleryItem","image","error","formData","form","name","value","storedData","parsedData"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,qCACTC,EAAW,IAAIC,EAAe,YAAY,EAC1CC,EAAS,SAAS,cAAc,SAAS,EAE/CL,EAAW,iBAAiB,SAAUM,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMC,EAAc,SAAS,cAAc,sBAAsB,EAAE,MACnEN,EAAQ,UAAY,GAEpBO,EACG,IACC,gCAAgCN,CAAM,MAAMK,CAAW,mEACxD,EACA,KAAKE,GAAY,CAChB,MAAMC,EAAOD,EAAS,KAAK,KAG3B,GAFA,QAAQ,IAAIC,CAAI,EAEZA,EAAK,SAAW,EAClBC,EAAS,KAAK,CACZ,MAAO,QACP,QACE,2EACF,MAAO,MACP,SAAU,WACpB,CAAS,MACI,CACLN,EAAO,MAAM,QAAU,QACvB,MAAMO,EAAcF,EAAK,OACzB,IAAIG,EAAe,EAEnBH,EAAK,QAAQI,GAAO,CAClB,MAAMC,EAAc,SAAS,cAAc,IAAI,EAC/CA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,UAAY;AAAA,uBACXD,EAAI,aAAa;AAAA,0BACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,YAGlDb,EAAQ,YAAYc,CAAW,EAG/B,MAAMC,EAAQD,EAAY,cAAc,gBAAgB,EACxDC,EAAM,OAAS,IAAM,CACnBH,IACIA,IAAiBD,IACnBP,EAAO,MAAM,QAAU,OAErC,CACA,CAAS,EAEDF,EAAS,QAAO,CACjB,CACP,CAAK,EACA,MAAMc,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBN,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,uDACT,MAAO,MACP,SAAU,WAClB,CAAO,CACP,CAAK,CACL,CAAC,ECtED,IAAIO,EAAW,CACX,MAAO,GACP,QAAS,EACb,EAEE,MAAMC,EAAO,SAAS,cAAc,gBAAgB,EAGpDA,EAAK,iBAAiB,QAASb,GAAS,CACtC,KAAM,CAAE,KAAAc,EAAM,MAAAC,GAAUf,EAAM,OAC9BY,EAASE,CAAI,EAAIC,EACjB,aAAa,QAAQ,sBAAuB,KAAK,UAAUH,CAAQ,CAAC,CACxE,CAAG,EAGD,MAAMI,EAAa,aAAa,QAAQ,qBAAqB,EAC7D,QAAQ,IAAIA,CAAU,EAEtB,GAAIA,EAAY,CACd,MAAMC,EAAa,KAAK,MAAMD,CAAU,EACxC,QAAQ,IAAIC,CAAU,EACtBL,EAAWK,EACXJ,EAAK,SAAS,MAAM,MAAQI,EAAW,MACvCJ,EAAK,SAAS,QAAQ,MAAQI,EAAW,OAC1C,CAGDJ,EAAK,iBAAiB,SAAUb,GAAS,CAIvC,GAHAA,EAAM,eAAc,EAGhB,CAACY,EAAS,OAAS,CAACA,EAAS,QAAS,CACxC,MAAM,wBAAwB,EAC9B,MACD,CAGD,aAAa,WAAW,qBAAqB,EAC7CA,EAAS,MAAQ,GACjBA,EAAS,QAAU,GACnBC,EAAK,MAAK,CACd,CAAG"}