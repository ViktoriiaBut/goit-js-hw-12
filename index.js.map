{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '46313967-d4d30fae59777882921d7e8bb'; // мой ключ\n\nexport async function getPictures(query, currentPage) {\n    const searchParams = new URLSearchParams({\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: currentPage    \n    });\n\n       const url = `https://pixabay.com/api/?${searchParams}`;\n            \ntry {\n  const response = await axios.get(url);\n  return response.data;\n} catch (error) {\n  console.error('Error fetching images:', error);\n  throw error;\n}\n}\nexport default getPictures;","\nconst gallery = document.querySelector('.gallery');\n\n export function renderPictures(pics) {\n  \n  const markup = pics\n    .map(\n       ({ webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => { return `\n<li class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" /></a>\n                  <div class=\"info\">\n                    <p class=\"info-item\"><span>Likes:</span> ${likes}</p>\n                    <p class=\"info-item\"><span>Views:</span> ${views}</p>\n                    <p class=\"info-item\"><span>Comments:</span> ${comments}</p>\n                    <p class=\"info-item\"><span>Downloads:</span> ${downloads}</p>\n                </div>\n            </li>`\n          })\n       .join('');\n\n       gallery.insertAdjacentHTML(\"beforeend\", markup);\n} \n\nexport default renderPictures;","import getPictures from './js/pixabay-api.js';\nimport renderPictures from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector(\".load-more\");\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\n// const inputText = document.querySelector(\".search-form input\");\n\nfunction showLoader() {\n  loader.style.display = 'flex';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\nlet lightbox;\nlet page = 1;\nlet searchValue = '';\nlet totalHits = 0;\nlet loadedHits = 0;\n\nloadMore.style.display = 'none';\nsearchForm.addEventListener ('submit', handleSubmit); \nloadMore.addEventListener(\"click\", loadMoreImg);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    \n    searchValue = event.target.elements.query.value.trim();\n    gallery.innerHTML = ''; \n\n   if (!searchValue) {\n  iziToast.error({\n    title: 'Error',\n    message: 'Please enter a search query!',\n  }); \n     return;\n  }\n\n  loadMore.style.display = \"none\";\n  page = 1;\n  totalHits = 0;\n  loadedHits = 0;\n  gallery.innerHTML = \"\";\n\n  showLoader();\n  await loadData(searchValue, page);\n  hideLoader();\n  searchForm.reset();\n}\n\nasync function loadData(searchValue, page) {\n  try {\n      const data = await getPictures(searchValue, page);\n\n      if (data.hits.length === 0) {\n          loadMore.style.display = \"none\";\n          iziToast.warning({\n         title: 'No results',\n         message: 'Sorry, there are no images matching your search query.'\n          });\n          return;\n      }\n\n      totalHits = data.totalHits;\n      loadedHits += data.hits.length;\n\n      renderPictures(data.hits);\n      setupLightbox();\n\n      if (page > 1) {\n          scrollPage();\n      }\n      showLoadMoreBtn();\n\n  } catch (error) {\n      iziToast.error({\n          color: 'red',\n          message: `Error fetching more images: ${error.message}`,\n          \n      });\n  }\n}\n\nasync function loadMoreImg() {\n  page++;\n  loadMore.disabled = true;\n  showLoader();\n  await loadData(searchValue, page);\n  hideLoader();\n}\n\nfunction showLoadMoreBtn() {\n  if (loadedHits >= totalHits) {\n      loadMore.style.display = \"none\";\n      iziToast.error({\n        title: 'End of Results',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n  } else {\n      loadMore.style.display = \"block\";\n      loadMore.disabled = false;\n  }\n}\n\nfunction setupLightbox() {\n  if (lightbox) {\n      lightbox.refresh();\n  } else {\n      lightbox = new SimpleLightbox('.gallery-item a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n      });\n  }\n}\n\nfunction scrollPage() {\n  const galleryItem = document.querySelector(\".gallery-item\");\n  if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n          top: height * 2,\n          behavior: \"smooth\"\n      });\n  }\n}\n\n\n\n\n\n\n     "],"names":["apiKey","getPictures","query","currentPage","url","axios","error","gallery","renderPictures","pics","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loader","loadMore","searchForm","showLoader","hideLoader","lightbox","page","searchValue","totalHits","loadedHits","handleSubmit","loadMoreImg","event","iziToast","loadData","data","setupLightbox","scrollPage","showLoadMoreBtn","SimpleLightbox","galleryItem","height"],"mappings":"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"}